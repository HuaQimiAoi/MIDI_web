<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infilling</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Arimo&family=Varela+Round&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Literata&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='type.css') }}"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='index.js') }}"></script>
  </head>

  <body>
    <header class="page-header">
      <h1 class="">Music accompaniment generation</h1>
      <h2 class="">
        Generate accompaniment melodies containing various instrument tracks for
        a given musical melody
      </h2>
<!--      <a-->
<!--        class="page-header__link"-->
<!--        target="_blank"-->
<!--        href="https://github.com/reichang182/variable-length-piano-infilling"-->
<!--      >-->
<!--        Github</a-->
<!--      >-->
<!--      <a-->
<!--        class="page-header__link"-->
<!--        target="_blank"-->
<!--        href="https://arxiv.org/pdf/2108.05064.pdf"-->
<!--      >-->
<!--        Paper</a-->
<!--      >-->
      <a class="page-header__link" href="#try">Have a Try</a>
    </header>
    <main>
      <section id="inpainted-music">
        <h2>Music Accompaniment Generated by My Model</h2>
        <p>
          Examples of the accompaniment result of my model.For each instance, I
          present two MIDI samples. One is the initial lead melody track, and
          the other is the comprehensive version of the music generated by the
          model based on the lead melody track, which includes instrumental
          accompaniment. This is done in order to more significantly demonstrate
          the professionalism and effectiveness of the model in automatically
          generating accompaniments.
        </p>
        <p>
          Note: In the piano roll representation of MIDI samples, I have defined
          the note colors for each track as follows, to help you observe more
          intuitively:
        </p>
        <p>
          Melody Track:<span class="Melody"></span>Generated Drum Track:<span
            class="Drum"
          ></span
          >Generated other instruments Tracks:<span class="Others_0"></span
          ><span class="Others_1"></span><span class="Others_2"></span
          ><span class="Others_3"></span>
        </p>
        <section id="inpainted-music-song1">
          <h3>Music 01</h3>
          <div class="anchor-container">
            <a
              class="selected"
              midi-url="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/79.mid"
              >Melody</a
            >
            <a
              midi-url="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/80.mid"
              >Melody Accompaniment</a
            >
          </div>
          <midi-visualizer
            id="inpainted-music-song1-visualizer"
            src="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/79.mid"
          >
          </midi-visualizer>
          <midi-player
            id="inpainted-music-song1-player"
            src="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/79.mid"
            sound-font
            visualizer="#inpainted-music-song1-visualizer"
          >
          </midi-player>
        </section>
        <section id="inpainted-music-song2">
          <h3>Music 02</h3>
          <div class="anchor-container">
            <a
              class="selected"
              midi-url="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/77.mid"
              >Melody</a
            >
            <a
              midi-url="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/78.mid"
              >Melody Accompaniment</a
            >
          </div>
          <midi-visualizer
            id="inpainted-music-song2-visualizer"
            src="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/77.mid"
          >
          </midi-visualizer>
          <midi-player
            id="inpainted-music-song2-player"
            src="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/77.mid"
            sound-font
            visualizer="#inpainted-music-song2-visualizer"
          >
          </midi-player>
        </section>
        <section id="inpainted-music-song3">
          <h3>Music 03</h3>
          <div class="anchor-container">
            <a
              class="selected"
              midi-url="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/75.mid"
              >Melody</a
            >
            <a
              midi-url="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/76.mid"
              >Melody Accompaniment</a
            >
          </div>
          <midi-visualizer
            id="inpainted-music-song3-visualizer"
            src="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/75.mid"
          >
          </midi-visualizer>
          <midi-player
            id="inpainted-music-song3-player"
            src="https://cdn.jsdelivr.net/gh/HuaQimiAoi/upload_MIDIs@main/75.mid"
            sound-font
            visualizer="#inpainted-music-song3-visualizer"
          >
          </midi-player>
        </section>
<!--        <section id="inpainted-music-song4">-->
<!--          <h3>Song 04</h3>-->
<!--          <div class="anchor-container">-->
<!--            <a-->
<!--              class="selected"-->
<!--              midi-url="https://cdn.jsdelivr.net/gh/jackyhsiung/infilling-demo-page/assets/songs/inpainted-music/song04/song04_Ours_2track.midi"-->
<!--              >Ours</a-->
<!--            >-->
<!--            <a-->
<!--              midi-url="https://cdn.jsdelivr.net/gh/jackyhsiung/infilling-demo-page/assets/songs/inpainted-music/song04/song04_FELIX_2track.midi"-->
<!--              >FELIX</a-->
<!--            >-->
<!--            <a-->
<!--              midi-url="https://cdn.jsdelivr.net/gh/jackyhsiung/infilling-demo-page/assets/songs/inpainted-music/song04/song04_ILM_2track.midi"-->
<!--              >ILM</a-->
<!--            >-->
<!--          </div>-->
<!--          <midi-visualizer-->
<!--            id="inpainted-music-song4-visualizer"-->
<!--            src="https://cdn.jsdelivr.net/gh/jackyhsiung/infilling-demo-page/assets/songs/inpainted-music/song04/song04_Ours_2track.midi"-->
<!--          >-->
<!--          </midi-visualizer>-->
<!--          <midi-player-->
<!--            id="inpainted-music-song4-player"-->
<!--            src="https://cdn.jsdelivr.net/gh/jackyhsiung/infilling-demo-page/assets/songs/inpainted-music/song04/song04_Ours_2track.midi"-->
<!--            sound-font="https://storage.googleapis.com/magentadata/js/soundfonts/salamander"-->
<!--            visualizer="#inpainted-music-song4-visualizer"-->
<!--          >-->
<!--          </midi-player>-->
<!--        </section>-->
      </section>

      <section id="try">
        <h2>Now have a try and get your own music accompaniment!</h2>
        <p>
          Upload your lead melody MIDI file. Within a few minutes, the model
          will generate a brand-new MIDI file for you, which gracefully
          integrates instrumental accompaniment with your lead melody.To achieve optimal accompaniment results, I suggest that you upload a MIDI file
          that contains a main melody of approximately 10 to 16 bars.
        </p>
        <section id="try-song1">
          <form
            id="upload-form"
            action="/upload"
            method="post"
            enctype="multipart/form-data"
          >
            <label for="file-upload" class="custom-file-upload">
              Select your MIDI File
            </label>
            <input
              id="file-upload"
              type="file"
              name="file"
              accept=".mid, .midi"
              style="display: none"
            />
            <span id="file-name">No MIDI File has been selected.</span>
            <button type="submit" id="upload-midi">Upload</button>
          </form>
          <div id="loading-midi" style="display: none">
            <div class="loading-bar">
              <div class="loading-bar-progress"></div>
            </div>
            <div id="loading-text">Loading your MIDI file...</div>
          </div>
          <div class="displayer">
            <div id="generate-function">
              <p id="file-name2"></p>
              <button id="generate-midi">Get your music accompaniment</button>
            </div>
            <div id="generating-midi" style="display: none">
              <div class="loading-bar">
                <div class="loading-bar-progress"></div>
              </div>
              <div id="generating-text">
                Generating your music accompaniment,please wait for a few
                minutes...
              </div>
            </div>
            <div id="download-midi" style="display: none">
              <div id="download-text">
                Your music accompaniment has been successfully generated.
              </div>
              <button id="download-midi-button">Download</button>
            </div>
            <div class="anchor-container">
              <a class="selected" id="melody" midi-url="">Melody</a>
              <a id="accompaniment" midi-url="">Melody Accompaniment</a>
            </div>
            <midi-visualizer id="try-song1-visualizer" src="">
            </midi-visualizer>
            <midi-player
              id="try-song1-player"
              src=""
              sound-font
              visualizer="#try-song1-visualizer"
            >
            </midi-player>
          </div>
        </section>
      </section>
      <footer class="site-footer">
        <span class="site-footer-credit"
          >We use
          <a target="_blank" href="https://github.com/cifkao/html-midi-player"
            >html_midi_player</a
          >
          kindly shared publicly by
          <a target="_blank" href="https://ondrej.cifka.com">Ondřej Cífka</a>
          for visualizing the piano rolls of the MIDI files.
        </span>
      </footer>
    </main>
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.21.0/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.1.0"></script>
  </body>
</html>
